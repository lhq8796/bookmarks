(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["demo_js-mvc"],{d115:function(t,e,o){"use strict";o.r(e);var s=o("7a23");const i={id:"root_js-mvc"};function d(t,e,o,d,n,h){return Object(s["F"])(),Object(s["l"])("div",i)}o("f55a");var n=o("a1e9"),h=o("5c40");function a(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class l{constructor(){this.todos=JSON.parse(localStorage.getItem("todos"))||[]}update(){localStorage.setItem("todos",JSON.stringify(this.todos))}addTodo(t){this.todos=[...this.todos,t],console.log(this.todos),this.update(),this.onTodoListChanged(this.todos)}editTodo(t,e){this.todos=this.todos.map(e=>{e.id===t&&(e.id,e.complete)}),this.update(),this.onTodoListChanged(this.todos)}deleteTodo(t){this.todos=this.todos.filter(e=>e.id!==t),this.update(),this.onTodoListChanged(this.todos)}toggleTodo(t){this.todos=this.todos.map(e=>{e.id===t&&(e.id,e.text,e.complete)}),this.update(),this.onTodoListChanged(this.todos)}bindEvents(t){this.onTodoListChanged=t.onTodoListChanged}}class r{constructor(){this.app=this.getElement("#root_js-mvc"),this.title=this.createElement("h1"),this.title.textContent="Todos",this.form=this.createElement("form"),this.input=this.createElement("input"),this.input.type="text",this.input.placeholder="Add todo",this.input.name="todo",this.submitButton=this.createElement("button"),this.submitButton.textContent="Submit",this.todoList=this.createElement("ul","todo-list"),this.form.append(this.input,this.submitButton),this.app.append(this.title,this.form,this.todoList)}createElement(t,e){const o=document.createElement(t);return e&&o.classList.add(e),o}getElement(t){const e=document.querySelector(t);return e}get todoText(){return this.input.value}resetInput(){this.input.value=""}displayTodos(t){while(this.todoList.firstChild)this.todoList.removeChild(this.todoList.firstChild);if(0===t.length){const t=this.createElement("p");t.textContent="Nothing to do! Add a task?",this.todoList.append(t)}else t.forEach(t=>{const e=this.createElement("li");e.id=t.id;const o=this.createElement("input");o.type="checkbox",o.checked=t.complete;const s=this.createElement("span");if(s.contentEditable=!0,s.classList.add("editable"),t.complete){const e=this.createElement("s");e.textContent=t.text,s.append(e)}else s.textContent=t.text;const i=this.createElement("button","delete");i.textContent="Delete",e.append(o,s,i),this.todoList.append(e)})}bindEvents(t){this.form.addEventListener("submit",t.handleAddTodo),this.todoList.addEventListener("click",t.handleDeleteTodo),this.todoList.addEventListener("input",t.handleEditTodo),this.todoList.addEventListener("focusout",t.handleEditTodoComplete),this.todoList.addEventListener("change",t.handleToggle)}}class c{constructor(t,e){a(this,"onTodoListChanged",t=>{this.view.displayTodos(t)}),a(this,"handleAddTodo",t=>{if(t.preventDefault(),this.view.todoText){const t={id:this.model.todos.length>0?this.model.todos[this.model.todos.length-1].id+1:1,text:this.view.todoText,complete:!1};this.model.addTodo(t),this.view.resetInput()}}),a(this,"handleDeleteTodo",t=>{if("delete"===t.target.className){const e=parseInt(t.target.parentElement.id);this.model.deleteTodo(e)}}),a(this,"handleToggle",t=>{if("checkbox"===t.target.type){const e=parseInt(t.target.parentElement.id);this.model.toggleTodo(e)}}),a(this,"handleEditTodo",t=>{"editable"===t.target.className&&(this.temporaryEditValue=t.target.innerText)}),a(this,"handleEditTodoComplete",t=>{if(this.temporaryEditValue){const e=parseInt(t.target.parentElement.id);this.model.editTodo(e,this.temporaryEditValue),this.temporaryEditValue=""}}),this.model=t,this.view=e,this.onTodoListChanged(this.model.todos),this.model.bindEvents(this),this.view.bindEvents(this),this.temporaryEditValue=""}}var p={name:"JSMVC",setup(){let t=Object(n["l"])(null);return Object(h["J"])(()=>{t.value=new c(new l,new r)}),{app:t}}};p.render=d;e["default"]=p},f55a:function(t,e,o){}}]);
//# sourceMappingURL=demo_js-mvc.e1047666.js.map